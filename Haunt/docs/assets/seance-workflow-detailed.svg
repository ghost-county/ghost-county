<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1350" style="background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);">
  <defs>
    <style>
      .title { font: bold 32px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #e0d7ff; }
      .subtitle { font: italic 15px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #b8a7e8; }
      .step-num { font: bold 22px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #fff; }
      .step-title { font: bold 17px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #fff; }
      .step-desc { font: 13px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: rgba(255,255,255,0.95); }
      .step-detail { font: 11px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: rgba(255,255,255,0.85); }
      .phase-label { font: bold 14px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #fff; }
      .arrow { stroke: #9d8cd9; stroke-width: 3; fill: none; marker-end: url(#arrowhead); filter: url(#glow); }
      .arrow-label { font: italic 12px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #b8a7e8; }
      .artifact-box { fill: rgba(255,255,255,0.1); stroke: #9d8cd9; stroke-width: 2; rx: 8; backdrop-filter: blur(10px); }
      .artifact-title { font: bold 13px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #e0d7ff; }
      .artifact-path { font: italic 10px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #b8a7e8; }
    </style>

    <!-- Mystical glow effect -->
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Enhanced shadow for depth -->
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#000" flood-opacity="0.4"/>
    </filter>

    <!-- Arrow marker with glow -->
    <marker id="arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
      <polygon points="0 0, 12 3, 0 6" fill="#9d8cd9"/>
    </marker>

    <!-- Crystal ball gradient -->
    <radialGradient id="crystalGradient" cx="50%" cy="30%">
      <stop offset="0%" style="stop-color:#a78bfa;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#7c3aed;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#5b21b6;stop-opacity:0.6" />
    </radialGradient>

    <!-- Mystical purple gradient -->
    <linearGradient id="purpleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1" />
    </linearGradient>

    <!-- Green phase gradient -->
    <linearGradient id="greenGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>

    <!-- Orange phase gradient -->
    <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>

    <!-- Blue phase gradient -->
    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
    </linearGradient>

    <!-- Decision diamond gradient -->
    <linearGradient id="decisionGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ec4899;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#db2777;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Mystical background stars -->
  <circle cx="100" cy="150" r="2" fill="#fff" opacity="0.6"/>
  <circle cx="800" cy="200" r="1.5" fill="#fff" opacity="0.4"/>
  <circle cx="150" cy="400" r="1" fill="#fff" opacity="0.5"/>
  <circle cx="750" cy="600" r="2" fill="#fff" opacity="0.7"/>
  <circle cx="200" cy="800" r="1.5" fill="#fff" opacity="0.5"/>
  <circle cx="850" cy="900" r="1" fill="#fff" opacity="0.6"/>
  <circle cx="100" cy="1100" r="2" fill="#fff" opacity="0.4"/>

  <!-- Title -->
  <text x="450" y="50" class="title" text-anchor="middle">The SÃ©ance Workflow</text>
  <text x="450" y="73" class="subtitle" text-anchor="middle">Transform ideas into implementation-ready roadmaps</text>

  <!-- Step 0: Initiation (Crystal Ball) -->
  <g filter="url(#shadow)">
    <rect x="275" y="110" width="350" height="80" rx="12" fill="url(#crystalGradient)" stroke="#a78bfa" stroke-width="2"/>
    <circle cx="305" cy="150" r="20" fill="rgba(255,255,255,0.3)" filter="url(#glow)"/>
    <text x="305" y="158" class="step-num" text-anchor="middle">0</text>
    <text x="340" y="135" class="step-title">ğŸ”® Initiation</text>
    <text x="340" y="155" class="step-desc">User invokes: /seance or "hold a sÃ©ance"</text>
    <text x="340" y="173" class="step-detail">â†’ Project Manager agent spawned</text>
  </g>

  <line x1="450" y1="190" x2="450" y2="225" class="arrow"/>

  <!-- Context Detection Decision Diamond -->
  <g filter="url(#shadow)">
    <polygon points="450,225 590,285 450,345 310,285" fill="url(#decisionGradient)" stroke="#ec4899" stroke-width="2"/>
    <text x="450" y="278" class="phase-label" text-anchor="middle">ğŸ“‚ Context Detection</text>
    <text x="450" y="296" class="phase-label" text-anchor="middle" font-size="11">New or existing project?</text>
  </g>

  <!-- Branch: New Project -->
  <line x1="310" y1="285" x2="180" y2="285" class="arrow"/>
  <line x1="180" y1="285" x2="180" y2="405" class="arrow"/>
  <text x="230" y="280" class="arrow-label">New project</text>

  <g filter="url(#shadow)">
    <rect x="60" y="405" width="240" height="75" rx="10" fill="url(#purpleGradient)" stroke="#8b5cf6" stroke-width="2"/>
    <text x="180" y="435" class="phase-label" text-anchor="middle">ğŸ—ï¸ Project Setup</text>
    <text x="180" y="455" class="step-desc" text-anchor="middle">Initialize .haunt/ structure</text>
    <text x="180" y="472" class="step-detail" text-anchor="middle">Create plans/, completed/, tests/ dirs</text>
  </g>

  <line x1="180" y1="480" x2="180" y2="515" class="arrow"/>
  <line x1="180" y1="515" x2="450" y2="515" class="arrow"/>

  <!-- Branch: Existing Project -->
  <line x1="590" y1="285" x2="720" y2="285" class="arrow"/>
  <line x1="720" y1="285" x2="720" y2="515" class="arrow"/>
  <text x="650" y="280" class="arrow-label">Existing project</text>
  <line x1="720" y1="515" x2="450" y2="515" class="arrow"/>

  <!-- Convergence point -->
  <line x1="450" y1="515" x2="450" y2="565" class="arrow"/>

  <!-- Phase 1: Requirements Development -->
  <g filter="url(#shadow)">
    <rect x="225" y="565" width="450" height="100" rx="12" fill="url(#greenGradient)" stroke="#10b981" stroke-width="2"/>
    <circle cx="260" cy="615" r="20" fill="rgba(255,255,255,0.25)"/>
    <text x="260" y="623" class="step-num" text-anchor="middle">1</text>
    <text x="295" y="593" class="step-title">ğŸ“ Phase 1: Requirements Development</text>
    <text x="295" y="613" class="step-desc">Brain dump â†’ Formal requirements</text>
    <text x="295" y="631" class="step-detail">â€¢ Extract core needs â€¢ Identify constraints â€¢ Create testable specs</text>
    <text x="295" y="648" class="step-detail">Skill: gco-requirements-development</text>
  </g>

  <!-- Artifact: Requirements Doc -->
  <g filter="url(#shadow)">
    <rect x="700" y="585" width="175" height="60" class="artifact-box"/>
    <text x="787" y="608" class="artifact-title" text-anchor="middle">ğŸ“„ Requirements Doc</text>
    <text x="787" y="623" class="artifact-path" text-anchor="middle">requirements-XXX.md</text>
    <text x="787" y="636" class="artifact-path" text-anchor="middle">.haunt/plans/</text>
  </g>
  <line x1="675" y1="615" x2="700" y2="615" class="arrow" stroke-width="2"/>

  <line x1="450" y1="665" x2="450" y2="710" class="arrow"/>

  <!-- Phase 2: Requirements Analysis -->
  <g filter="url(#shadow)">
    <rect x="225" y="710" width="450" height="115" rx="12" fill="url(#orangeGradient)" stroke="#f59e0b" stroke-width="2"/>
    <circle cx="260" cy="767" r="20" fill="rgba(255,255,255,0.25)"/>
    <text x="260" y="775" class="step-num" text-anchor="middle">2</text>
    <text x="295" y="738" class="step-title">ğŸ” Phase 2: Requirements Analysis</text>
    <text x="295" y="758" class="step-desc">Strategic frameworks for prioritization</text>
    <text x="295" y="776" class="step-detail">â€¢ JTBD analysis â€¢ Kano Model â€¢ RICE scoring â€¢ VRIO/SWOT</text>
    <text x="295" y="794" class="step-detail">â€¢ Prioritize features â€¢ Assess strategic impact</text>
    <text x="295" y="812" class="step-detail">Skill: gco-requirements-analysis</text>
  </g>

  <!-- Artifact: Analysis Doc -->
  <g filter="url(#shadow)">
    <rect x="700" y="735" width="175" height="60" class="artifact-box"/>
    <text x="787" y="758" class="artifact-title" text-anchor="middle">ğŸ“Š Analysis Document</text>
    <text x="787" y="773" class="artifact-path" text-anchor="middle">requirements-XXX-analysis.md</text>
    <text x="787" y="786" class="artifact-path" text-anchor="middle">.haunt/plans/</text>
  </g>
  <line x1="675" y1="767" x2="700" y2="767" class="arrow" stroke-width="2"/>

  <line x1="450" y1="825" x2="450" y2="870" class="arrow"/>

  <!-- Phase 3: Roadmap Creation -->
  <g filter="url(#shadow)">
    <rect x="225" y="870" width="450" height="100" rx="12" fill="url(#blueGradient)" stroke="#3b82f6" stroke-width="2"/>
    <circle cx="260" cy="920" r="20" fill="rgba(255,255,255,0.25)"/>
    <text x="260" y="928" class="step-num" text-anchor="middle">3</text>
    <text x="295" y="898" class="step-title">ğŸ—ºï¸ Phase 3: Roadmap Creation</text>
    <text x="295" y="918" class="step-desc">Atomic sizing, dependency batching, agent assignments</text>
    <text x="295" y="936" class="step-detail">â€¢ Size work (XS/S/M/SPLIT) â€¢ Create batches â€¢ Assign agents</text>
    <text x="295" y="954" class="step-detail">Skill: gco-roadmap-creation</text>
  </g>

  <!-- Artifact: Roadmap -->
  <g filter="url(#shadow)">
    <rect x="700" y="890" width="175" height="60" class="artifact-box"/>
    <text x="787" y="913" class="artifact-title" text-anchor="middle">ğŸ—ºï¸ Updated Roadmap</text>
    <text x="787" y="928" class="artifact-path" text-anchor="middle">roadmap.md</text>
    <text x="787" y="941" class="artifact-path" text-anchor="middle">.haunt/plans/</text>
  </g>
  <line x1="675" y1="920" x2="700" y2="920" class="arrow" stroke-width="2"/>

  <line x1="450" y1="970" x2="450" y2="1015" class="arrow"/>

  <!-- Decision: Summon Haunt? -->
  <g filter="url(#shadow)">
    <polygon points="450,1015 570,1065 450,1115 330,1065" fill="url(#decisionGradient)" stroke="#ec4899" stroke-width="2"/>
    <text x="450" y="1060" class="phase-label" text-anchor="middle" font-size="15">ğŸ‘¥ Summon Haunt?</text>
    <text x="450" y="1080" class="phase-label" text-anchor="middle" font-size="11">(Optional)</text>
  </g>

  <!-- Branch: Yes - Spawn Agents -->
  <line x1="330" y1="1065" x2="180" y2="1065" class="arrow"/>
  <text x="240" y="1060" class="arrow-label">Yes (parallel)</text>

  <g filter="url(#shadow)">
    <rect x="60" y="1035" width="240" height="65" rx="10" fill="url(#purpleGradient)" stroke="#8b5cf6" stroke-width="2"/>
    <text x="180" y="1061" class="phase-label" text-anchor="middle">ğŸ§™ Spawn Worker Agents</text>
    <text x="180" y="1082" class="step-desc" text-anchor="middle">Dev, Research, Code-Reviewer</text>
  </g>

  <!-- Branch: No - Manual -->
  <line x1="570" y1="1065" x2="720" y2="1065" class="arrow"/>
  <text x="635" y="1060" class="arrow-label">No (manual)</text>

  <g filter="url(#shadow)">
    <rect x="600" y="1035" width="240" height="65" rx="10" fill="rgba(255,255,255,0.1)" stroke="#9d8cd9" stroke-width="2"/>
    <text x="720" y="1061" class="phase-label" text-anchor="middle" fill="#e0d7ff">ğŸ‘¤ Manual Implementation</text>
    <text x="720" y="1082" class="step-desc" text-anchor="middle" fill="#b8a7e8">User works from roadmap</text>
  </g>

  <!-- Convergence to Ready -->
  <line x1="180" y1="1100" x2="180" y2="1175" class="arrow"/>
  <line x1="180" y1="1175" x2="360" y2="1175" class="arrow"/>

  <line x1="720" y1="1100" x2="720" y2="1175" class="arrow"/>
  <line x1="720" y1="1175" x2="540" y2="1175" class="arrow"/>

  <!-- Final: Ready to Work (Glowing) -->
  <g filter="url(#shadow)">
    <ellipse cx="450" cy="1175" rx="140" ry="35" fill="url(#greenGradient)" stroke="#10b981" stroke-width="2"/>
    <text x="450" y="1183" class="phase-label" text-anchor="middle" font-size="17">âœ… Ready to Work</text>
  </g>

  <!-- Legend with mystical styling -->
  <g filter="url(#shadow)">
    <rect x="20" y="15" width="215" height="80" rx="8" fill="rgba(139,92,246,0.2)" stroke="#8b5cf6" stroke-width="2"/>
    <text x="30" y="38" font-size="14" font-weight="bold" fill="#e0d7ff">Legend:</text>

    <rect x="30" y="50" width="18" height="14" rx="3" fill="url(#greenGradient)"/>
    <text x="54" y="60" font-size="11" fill="#b8a7e8">Planning Phase</text>

    <polygon points="30,74 39,79 30,84 21,79" fill="url(#decisionGradient)"/>
    <text x="54" y="82" font-size="11" fill="#b8a7e8">Decision Point</text>
  </g>
</svg>
