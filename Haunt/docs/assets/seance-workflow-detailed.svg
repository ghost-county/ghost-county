<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1350" style="background-color: #fafbfc;">
  <!-- Define styles -->
  <defs>
    <style>
      .title { font: bold 28px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #1a202c; }
      .subtitle { font: italic 14px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #718096; }
      .step-num { font: bold 20px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #fff; }
      .step-title { font: bold 16px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #fff; }
      .step-desc { font: 13px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: rgba(255,255,255,0.9); }
      .step-detail { font: 11px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: rgba(255,255,255,0.8); }
      .phase-label { font: bold 13px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #fff; }
      .decision-text { font: 14px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #2d3748; text-anchor: middle; }
      .arrow { stroke: #4a5568; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead); }
      .arrow-label { font: italic 12px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #718096; }
      .artifact-box { fill: #fff; stroke: #cbd5e0; stroke-width: 2; rx: 6; }
      .artifact-title { font: bold 12px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #2d3748; }
      .artifact-path { font: italic 10px -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; fill: #718096; }
    </style>

    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4a5568" />
    </marker>

    <!-- Shadow filter -->
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Title -->
  <text x="450" y="45" class="title" text-anchor="middle">The SÃ©ance Workflow</text>
  <text x="450" y="68" class="subtitle" text-anchor="middle">Transform ideas into implementation-ready roadmaps</text>

  <!-- Step 0: Initiation -->
  <g filter="url(#shadow)">
    <rect x="275" y="110" width="350" height="75" rx="10" fill="#667eea" stroke="#5a67d8" stroke-width="2"/>
    <circle cx="300" cy="148" r="18" fill="rgba(255,255,255,0.2)"/>
    <text x="300" y="155" class="step-num" text-anchor="middle">0</text>
    <text x="330" y="135" class="step-title">ğŸ”® Initiation</text>
    <text x="330" y="155" class="step-desc">User invokes: /seance or "hold a sÃ©ance"</text>
    <text x="330" y="172" class="step-detail">â†’ Project Manager agent spawned</text>
  </g>

  <line x1="450" y1="185" x2="450" y2="225" class="arrow"/>

  <!-- Context Detection Decision Diamond -->
  <g filter="url(#shadow)">
    <polygon points="450,225 580,285 450,345 320,285" fill="#fc8181" stroke="#f56565" stroke-width="2"/>
    <text x="450" y="275" class="phase-label" text-anchor="middle">ğŸ“‚ Context Detection</text>
    <text x="450" y="293" class="phase-label" text-anchor="middle" font-size="11">New or existing project?</text>
  </g>

  <!-- Branch: New Project -->
  <line x1="320" y1="285" x2="180" y2="285" class="arrow"/>
  <line x1="180" y1="285" x2="180" y2="405" class="arrow"/>
  <text x="235" y="280" class="arrow-label">New project</text>

  <g filter="url(#shadow)">
    <rect x="60" y="405" width="240" height="70" rx="8" fill="#b794f4" stroke="#9f7aea" stroke-width="2"/>
    <text x="180" y="432" class="phase-label" text-anchor="middle">ğŸ—ï¸ Project Setup</text>
    <text x="180" y="452" class="step-desc" text-anchor="middle">Initialize .haunt/ structure</text>
    <text x="180" y="467" class="step-detail" text-anchor="middle">Create plans/, completed/, tests/ dirs</text>
  </g>

  <line x1="180" y1="475" x2="180" y2="515" class="arrow"/>
  <line x1="180" y1="515" x2="450" y2="515" class="arrow"/>

  <!-- Branch: Existing Project -->
  <line x1="580" y1="285" x2="720" y2="285" class="arrow"/>
  <line x1="720" y1="285" x2="720" y2="515" class="arrow"/>
  <text x="640" y="280" class="arrow-label">Existing project</text>
  <line x1="720" y1="515" x2="450" y2="515" class="arrow"/>

  <!-- Convergence point -->
  <line x1="450" y1="515" x2="450" y2="565" class="arrow"/>

  <!-- Phase 1: Requirements Development -->
  <g filter="url(#shadow)">
    <rect x="225" y="565" width="450" height="95" rx="10" fill="#48bb78" stroke="#38a169" stroke-width="2"/>
    <circle cx="255" cy="612" r="18" fill="rgba(255,255,255,0.2)"/>
    <text x="255" y="619" class="step-num" text-anchor="middle">1</text>
    <text x="285" y="593" class="step-title">ğŸ“ Phase 1: Requirements Development</text>
    <text x="285" y="613" class="step-desc">Brain dump â†’ Formal requirements</text>
    <text x="285" y="630" class="step-detail">â€¢ Extract core needs â€¢ Identify constraints â€¢ Create testable specs</text>
    <text x="285" y="647" class="step-detail">Skill: gco-requirements-development</text>
  </g>

  <!-- Artifact: Requirements Doc -->
  <g filter="url(#shadow)">
    <rect x="700" y="585" width="170" height="55" class="artifact-box"/>
    <text x="785" y="605" class="artifact-title" text-anchor="middle">ğŸ“„ Requirements Doc</text>
    <text x="785" y="620" class="artifact-path" text-anchor="middle">requirements-XXX.md</text>
    <text x="785" y="632" class="artifact-path" text-anchor="middle">.haunt/plans/</text>
  </g>
  <line x1="675" y1="612" x2="700" y2="612" class="arrow" stroke-width="1.5"/>

  <line x1="450" y1="660" x2="450" y2="710" class="arrow"/>

  <!-- Phase 2: Requirements Analysis -->
  <g filter="url(#shadow)">
    <rect x="225" y="710" width="450" height="110" rx="10" fill="#ed8936" stroke="#dd6b20" stroke-width="2"/>
    <circle cx="255" cy="765" r="18" fill="rgba(255,255,255,0.2)"/>
    <text x="255" y="772" class="step-num" text-anchor="middle">2</text>
    <text x="285" y="738" class="step-title">ğŸ” Phase 2: Requirements Analysis</text>
    <text x="285" y="758" class="step-desc">Strategic frameworks for prioritization</text>
    <text x="285" y="775" class="step-detail">â€¢ JTBD analysis â€¢ Kano Model â€¢ RICE scoring â€¢ VRIO/SWOT</text>
    <text x="285" y="792" class="step-detail">â€¢ Prioritize features â€¢ Assess strategic impact</text>
    <text x="285" y="809" class="step-detail">Skill: gco-requirements-analysis</text>
  </g>

  <!-- Artifact: Analysis Doc -->
  <g filter="url(#shadow)">
    <rect x="700" y="735" width="170" height="55" class="artifact-box"/>
    <text x="785" y="755" class="artifact-title" text-anchor="middle">ğŸ“Š Analysis Document</text>
    <text x="785" y="770" class="artifact-path" text-anchor="middle">requirements-XXX-analysis.md</text>
    <text x="785" y="782" class="artifact-path" text-anchor="middle">.haunt/plans/</text>
  </g>
  <line x1="675" y1="765" x2="700" y2="765" class="arrow" stroke-width="1.5"/>

  <line x1="450" y1="820" x2="450" y2="870" class="arrow"/>

  <!-- Phase 3: Roadmap Creation -->
  <g filter="url(#shadow)">
    <rect x="225" y="870" width="450" height="95" rx="10" fill="#4299e1" stroke="#3182ce" stroke-width="2"/>
    <circle cx="255" cy="917" r="18" fill="rgba(255,255,255,0.2)"/>
    <text x="255" y="924" class="step-num" text-anchor="middle">3</text>
    <text x="285" y="898" class="step-title">ğŸ—ºï¸ Phase 3: Roadmap Creation</text>
    <text x="285" y="918" class="step-desc">Atomic sizing, dependency batching, agent assignments</text>
    <text x="285" y="935" class="step-detail">â€¢ Size work (XS/S/M/SPLIT) â€¢ Create batches â€¢ Assign agents</text>
    <text x="285" y="952" class="step-detail">Skill: gco-roadmap-creation</text>
  </g>

  <!-- Artifact: Roadmap -->
  <g filter="url(#shadow)">
    <rect x="700" y="887" width="170" height="55" class="artifact-box"/>
    <text x="785" y="907" class="artifact-title" text-anchor="middle">ğŸ—ºï¸ Updated Roadmap</text>
    <text x="785" y="922" class="artifact-path" text-anchor="middle">roadmap.md</text>
    <text x="785" y="934" class="artifact-path" text-anchor="middle">.haunt/plans/</text>
  </g>
  <line x1="675" y1="917" x2="700" y2="917" class="arrow" stroke-width="1.5"/>

  <line x1="450" y1="965" x2="450" y2="1015" class="arrow"/>

  <!-- Decision: Summon Haunt? -->
  <g filter="url(#shadow)">
    <polygon points="450,1015 560,1065 450,1115 340,1065" fill="#f6ad55" stroke="#ed8936" stroke-width="2"/>
    <text x="450" y="1060" class="phase-label" text-anchor="middle" font-size="14">ğŸ‘¥ Summon Haunt?</text>
    <text x="450" y="1078" class="phase-label" text-anchor="middle" font-size="10">(Optional)</text>
  </g>

  <!-- Branch: Yes - Spawn Agents -->
  <line x1="340" y1="1065" x2="180" y2="1065" class="arrow"/>
  <text x="245" y="1060" class="arrow-label">Yes (parallel)</text>

  <g filter="url(#shadow)">
    <rect x="60" y="1035" width="240" height="60" rx="8" fill="#9f7aea" stroke="#805ad5" stroke-width="2"/>
    <text x="180" y="1058" class="phase-label" text-anchor="middle">ğŸ§™ Spawn Worker Agents</text>
    <text x="180" y="1078" class="step-desc" text-anchor="middle">Dev, Research, Code-Reviewer</text>
  </g>

  <!-- Branch: No - Manual -->
  <line x1="560" y1="1065" x2="720" y2="1065" class="arrow"/>
  <text x="625" y="1060" class="arrow-label">No (manual)</text>

  <g filter="url(#shadow)">
    <rect x="600" y="1035" width="240" height="60" rx="8" fill="#cbd5e0" stroke="#a0aec0" stroke-width="2"/>
    <text x="720" y="1058" class="phase-label" text-anchor="middle" fill="#2d3748">ğŸ‘¤ Manual Implementation</text>
    <text x="720" y="1078" class="step-desc" text-anchor="middle" fill="#4a5568">User works from roadmap</text>
  </g>

  <!-- Convergence to Ready -->
  <line x1="180" y1="1095" x2="180" y2="1175" class="arrow"/>
  <line x1="180" y1="1175" x2="360" y2="1175" class="arrow"/>

  <line x1="720" y1="1095" x2="720" y2="1175" class="arrow"/>
  <line x1="720" y1="1175" x2="540" y2="1175" class="arrow"/>

  <!-- Final: Ready to Work -->
  <g filter="url(#shadow)">
    <ellipse cx="450" cy="1175" rx="130" ry="30" fill="#48bb78" stroke="#38a169" stroke-width="2"/>
    <text x="450" y="1182" class="phase-label" text-anchor="middle" font-size="16">âœ… Ready to Work</text>
  </g>

  <!-- Legend -->
  <g filter="url(#shadow)">
    <rect x="20" y="15" width="200" height="75" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1.5"/>
    <text x="30" y="35" font-size="13" font-weight="bold" fill="#2d3748">Legend:</text>

    <rect x="30" y="45" width="16" height="12" rx="2" fill="#48bb78"/>
    <text x="52" y="54" font-size="11" fill="#4a5568">Planning Phase</text>

    <polygon points="30,67 38,72 30,77 22,72" fill="#f6ad55"/>
    <text x="52" y="75" font-size="11" fill="#4a5568">Decision Point</text>
  </g>
</svg>
